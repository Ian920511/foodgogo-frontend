import{B as a,C as i,r as n,s as g}from"./index-ba497632.js";import{u as y}from"./cartStore-34a7c14a.js";const c={async getOrder({orderId:r}){try{return(await a.get(`/orders/${r}`)).data}catch(o){throw o.response.data}},async getOrders(){try{return(await a.get("/orders")).data}catch(r){throw r.response.data}},async postOrder(){try{return await a.post("/orders")}catch(r){throw r.response.data}}},f=i("order",()=>{const r=n([]),o=n([]),s=n(null),u=y(),{cartItems:d}=g(u);return{orderDetails:o,orders:r,errorMessage:s,getOrderDetails:async({orderId:e})=>{try{const t=await c.getOrder({orderId:e});if(t.status==="success")return t}catch(t){s.value=t.message}},getOrders:async()=>{try{const e=await c.getOrders();e.status==="success"&&(r.value=e.data.orders)}catch(e){s.value=e.message}},postOrder:async()=>{if(!d.value){s.value="購物車無商品";return}try{const e=d.value.map(p=>({productId:p.product.id,quantity:p.quantity}));return await c.postOrder({items:e})}catch(e){s.value=e.message}}}});export{f as u};
