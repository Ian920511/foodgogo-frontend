import{i as k,b as V,s as m,r as C,j as M,o as n,d as i,e,t as c,f as o,w as r,y as u,v as b,F as D,p as F,m as v,D as L}from"./index-ba497632.js";import{u as R}from"./adminStore-be10674f.js";import"./orderStore-d52bf467.js";import"./cartStore-34a7c14a.js";const q={class:"container"},B=["onSubmit"],E={class:"pb-3 text-center"},N={class:"form-group"},P=e("label",{for:"name"},"Name",-1),T={class:"form-group"},j=e("label",{for:"categoryId"},"Category",-1),A=e("option",{value:"",selected:"",disabled:""}," --請選擇-- ",-1),O=["value"],z={class:"form-group"},G=e("label",{for:"price"},"Price",-1),H={class:"form-label-group mb-3"},J=e("label",{for:"role"},"Status",-1),K=e("option",{value:"active"},"Active",-1),Q=e("option",{value:"inactive"},"Inactive",-1),W=[K,Q],X={class:"form-group"},Y=e("label",{for:"description"},"Description",-1),Z={class:"form-group"},$=e("label",{for:"image"},"Image",-1),ee=["src"],te={key:0,class:"mb-4 text-center text-danger"},oe=["disabled"],le={__name:"ItemForm",setup(se){const p=k(),_=R(),h=V(),{isProcessing:y}=m(h),{addOrUpdateItem:S,toggleModal:g}=_,{formData:a,modalType:f}=m(_),{categories:I}=m(p),{getCategories:w}=p,d=C(null);M(async()=>{await w()});const x=l=>{const t=l.target.files;if(t.length===0)a.value.image="";else{const s=window.URL.createObjectURL(t[0]);a.value.image=s}},U=async l=>{try{const t=l.target;await S(t)}catch(t){d.value=t.message}};return(l,t)=>(n(),i("div",q,[e("form",{class:"my-2 my-lg-0 mx-auto",onSubmit:L(U,["stop","prevent"])},[e("h2",E,c(o(f)==="updateItem"?"更新":"新增")+"上架商品 ",1),e("div",N,[P,r(e("input",{id:"name","onUpdate:modelValue":t[0]||(t[0]=s=>o(a).name=s),type:"text",class:"form-control",name:"name",placeholder:"Enter name",required:""},null,512),[[u,o(a).name]])]),e("div",T,[j,r(e("select",{id:"categoryId",class:"form-control",name:"categoryId","onUpdate:modelValue":t[1]||(t[1]=s=>o(a).categoryId=s),required:""},[A,(n(!0),i(D,null,F(o(I),s=>(n(),i("option",{key:s.id,value:s.id},c(s.name),9,O))),128))],512),[[b,o(a).categoryId]])]),e("div",z,[G,r(e("input",{id:"price","onUpdate:modelValue":t[2]||(t[2]=s=>o(a).price=s),type:"number",class:"form-control",placeholder:"Enter price",name:"price"},null,512),[[u,o(a).price]])]),e("div",H,[J,r(e("select",{id:"status",name:"status",class:"form-control","onUpdate:modelValue":t[3]||(t[3]=s=>o(a).active=s),required:""},W,512),[[b,o(a).active]])]),e("div",X,[Y,r(e("textarea",{id:"description",class:"form-control",rows:"3",name:"description","onUpdate:modelValue":t[4]||(t[4]=s=>o(a).description=s)},null,512),[[u,o(a).description]])]),e("div",Z,[$,o(a).image?(n(),i("img",{key:0,src:o(a).image,class:"d-block img-thumbnail mb-3",width:"200",height:"200"},null,8,ee)):v("",!0),e("input",{id:"image",type:"file",name:"image",accept:"image/*",class:"form-control-file",onChange:x},null,32)]),d.value?(n(),i("p",te,c(d.value),1)):v("",!0),e("button",{type:"submit",class:"btn btn-primary mr-2",disabled:o(y)},c(o(f)==="updateItem"?"更新":"新增")+"商品 ",9,oe),e("button",{type:"button",class:"btn btn-primary",onClick:t[5]||(t[5]=(...s)=>o(g)&&o(g)(...s))}," 關閉 ")],40,B)]))}};export{le as default};
