import{o as n,d as c,e,m as r,f as s,t as a,g as P,u as M,s as p,b as N,j as R,k as S,F as A,E as T,n as C,p as V}from"./index-ba497632.js";import{u as x}from"./adminStore-be10674f.js";import{S as E}from"./SpinnerLoading-c6094c35.js";import"./orderStore-d52bf467.js";import"./cartStore-34a7c14a.js";const F={class:"text-center"},I=["disabled"],j=["disabled"],z=["src"],D=["disabled"],H={__name:"AdminProduct",props:["active","product"],setup(t){const b=x(),{toggleModal:u,toggleActive:m,deleteItem:g}=b,{showAlert:v}=P(),h=i=>{v("warning","確定要刪除商品嗎?",!0).then(o=>{if(o.isConfirmed)return g(i)})};return(i,o)=>(n(),c("tr",F,[e("td",null,[t.active?r("",!0):(n(),c("button",{key:0,class:"btn btn-danger btn-sm",disabled:i.isProcessing,onClick:o[0]||(o[0]=l=>h(t.product.id))},"刪除 ",8,I)),t.active?(n(),c("button",{key:1,class:"btn btn-success btn-sm",disabled:i.isProcessing,onClick:o[1]||(o[1]=l=>s(m)(t.product.id,t.active))}," 下架 ",8,j)):r("",!0)]),e("td",null,[e("img",{src:t.product.image,class:"img-fluid",style:{height:"100px",width:"auto"}},null,8,z)]),e("td",null,a(t.product.name),1),e("td",null,a(t.product.description),1),e("td",null,"NT$ "+a(t.product.price),1),e("td",null,[t.active?(n(),c("button",{key:1,class:"btn btn-primary btn-sm",onClick:o[3]||(o[3]=l=>s(u)(t.product.id))}," 更新 ")):(n(),c("button",{key:0,class:"btn btn-primary btn-sm",disabled:i.isProcessing,onClick:o[2]||(o[2]=l=>s(m)(t.product.id,t.active))}," 上架 ",8,D))])]))}},q={key:0,class:"text-danger text-center"},G={class:"table-responsive container"},J={key:0,class:"table"},K={class:"w-10",scope:"col"},O=e("th",{class:"w-15",scope:"col"},"商品圖片",-1),Q=e("th",{class:"w-20",scope:"col"},"商品名稱",-1),U=e("th",{class:"w-25",scope:"col"},"商品描述",-1),W=e("th",{class:"w-15",scope:"col"},"商品單價",-1),X={class:"w-15",scope:"col"},Y={key:1,class:"text-center"},nt={__name:"AdminList",props:["active"],setup(t){const b=M(),u=x(),{toggleModal:m,getItems:g}=u,{activeProducts:v,nonActiveProducts:h,errorMessage:i}=p(u),o=N(),{isLoading:l}=p(o),{showAlert:L}=P(),k=t,f=k.active?"上架":"下架",B=k.active?"下架":"刪除",d=k.active?v:h;return R(async()=>{try{await g()}catch(w){return L("error",w),b.replace({name:"ProductList"})}}),(w,$)=>(n(),c("section",{class:C({"mt-4":t.active})},[s(l)?(n(),S(E,{key:0})):(n(),c(A,{key:1},[e("h3",{class:C([{"mt-12":!t.active},"mb-3 text-center font-weight-bold"])},[T(a(s(f))+"商品清單 ",1),t.active?(n(),c("button",{key:0,class:"btn btn-warning float-right",onClick:$[0]||($[0]=y=>s(m)())}," 新增上架商品 ")):r("",!0)],2),s(i)?(n(),c("p",q,a(s(i)),1)):r("",!0),e("div",G,[s(d)&&s(d).length?(n(),c("table",J,[e("thead",null,[e("tr",null,[e("th",K,a(s(B)),1),O,Q,U,W,e("th",X,a(t.active?"更新":"上架")+"商品",1)])]),e("tbody",null,[(n(!0),c(A,null,V(s(d),y=>(n(),S(H,{key:y.id,active:t.active,product:y},null,8,["active","product"]))),128))])])):r("",!0)]),s(d)&&!s(d).length?(n(),c("p",Y," 沒有"+a(s(f))+"商品 ",1)):r("",!0)],64))],2))}};export{nt as default};
